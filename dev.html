<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Monaco Editor</title>
    <!-- Include Monaco CSS -->
    <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://unpkg.com/monaco-editor@latest/min/vs/editor/editor.main.css">
</head>
<body>
    <div id="container" style="width:800px;height:600px;border:1px solid grey"></div>
    <!-- Include Monaco JS -->
    <script src="https://unpkg.com/monaco-editor@latest/min/vs/loader.js"></script>
    <script>
        require.config({ paths: { 'vs': 'https://unpkg.com/monaco-editor@latest/min/vs' }});
        require(['vs/editor/editor.main'], function() {
            var editor = monaco.editor.create(document.getElementById('container'), {
                value: [
                    'function x() {',
                    '\tconsole.log("Hello world!");',
                    '}'
                ].join('\n'),
                language: 'javascript'
            });

			// Save action
			editor.addAction({
                id: 'my-save',
                label: 'My Save Action',
                keybindings: [monaco.KeyMod.CtrlCmd | monaco.KeyCode.KEY_S],
                contextMenuGroupId: 'navigation',
                contextMenuOrder: 1.5,
                run: function(ed) {
					alert("SAVE!")
                    var filePath = '/path/to/your/file'; // Replace with your file path
                    var fileContent = ed.getValue();

                    // Send a POST request to your server
                    fetch('http://localhost:1201/api/project/save', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            path: filePath,
                            content: fileContent
                        })
                    }).then(function(response) {
                        return response.text();
                    }).then(function(data) {
                        console.log('File saved:', data);
                    }).catch(function(error) {
                        console.error('Error:', error);
                    });
                }
            });
        });
    </script>
</body>
</html>
